<p id="notice"><%= notice %></p>

<h1>Sites</h1>

<p>
<%= link_to 'New Site', new_admin_site_path %>
</p>

<p>
<%= page_entries_info @sites %>
</p>

<table>
  <thead>
    <tr>
      <th>Category</th>
      <th>Icon</th>
      <th>Thumbnail</th>
      <th>Name /  Feed url</th>
      <th>Last post time</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @sites.each do |site| %>
      <tr>
        <td><%= if site.category&.icon_url.present? then image_tag site.category&.icon_url else "N/A" end %>
        <br/><%= site.category&.name %></td>
        <td><%= image_tag site.icon_url %></td>
        <td><%= image_tag site.thumbnail_url, :size => "32x32" %></td>
        <td><%= link_to site.name, site.url, target: "_blank" %>
        <br/><%= link_to site.feed_url, site.feed_url, target: "_blank" %></td>
        <td><%= site.last_post_time&.localtime %>
        <td><%= link_to 'Show', admin_site_path(site) %></td>
        <td><%= link_to 'Edit', edit_admin_site_path(site) %></td>
        <td><%= link_to 'Destroy', admin_site_path(site), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<p>
<%= paginate @sites %>
</p>
